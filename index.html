<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FLIX TV - Login & Perfis</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
        }

        :root {
            --primary-red: #E50914;
            --dark-bg: #141414;
            --darker-bg: #0A0A0A;
            --light-text: #FFFFFF;
            --gray-text: #B3B3B3;
            --card-bg: #2F2F2F;
            --bottom-menu-bg: rgba(20, 20, 20, 0.95);
        }

        body {
            background-color: var(--dark-bg);
            color: var(--light-text);
            overflow-x: hidden;
            overflow-y: auto;
        }

        /* ========== ANIMAÇÃO DE ENTRADA MODIFICADA ========== */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--dark-bg);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        /* NOVO: Container da letra/logo */
        .logo-letter-container {
            position: relative;
            width: 200px;
            height: 200px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 30px;
        }

        /* NOVO: Estilo da letra animada */
        .logo-letter {
            font-size: 120px;
            font-weight: 900;
            color: var(--primary-red);
            text-shadow: 0 0 30px rgba(229, 9, 20, 0.7);
            animation: letterPulse 1.5s infinite;
            font-family: 'Arial Black', 'Helvetica Neue', Helvetica, Arial, sans-serif;
        }

        /* NOVO: Estilo do texto FLIX TV */
        .logo-text-full {
            font-size: 80px;
            font-weight: 900;
            color: var(--primary-red);
            text-shadow: 0 0 30px rgba(229, 9, 20, 0.7);
            animation: letterPulse 1.5s infinite;
            font-family: 'Arial Black', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            letter-spacing: 5px;
        }

        /* NOVO: Opção com apenas a letra F */
        .letter-f {
            font-size: 120px;
            font-weight: 900;
            color: var(--primary-red);
            text-shadow: 0 0 30px rgba(229, 9, 20, 0.7);
            animation: letterPulse 1.5s infinite;
            font-family: 'Arial Black', 'Helvetica Neue', Helvetica, Arial, sans-serif;
        }

        /* NOVO: Animação para a letra */
        @keyframes letterPulse {
            0%, 100% { 
                transform: scale(1);
                text-shadow: 0 0 30px rgba(229, 9, 20, 0.7);
            }
            50% { 
                transform: scale(1.1);
                text-shadow: 0 0 50px rgba(229, 9, 20, 1);
            }
        }

        /* NOVO: Animação de brilho */
        @keyframes letterGlow {
            0%, 100% { 
                text-shadow: 0 0 20px var(--primary-red),
                            0 0 30px var(--primary-red),
                            0 0 40px var(--primary-red);
            }
            50% { 
                text-shadow: 0 0 30px var(--primary-red),
                            0 0 50px var(--primary-red),
                            0 0 60px var(--primary-red);
            }
        }

        /* NOVO: Estilo alternativo com brilho mais forte */
        .logo-letter-glow {
            font-size: 120px;
            font-weight: 900;
            color: var(--primary-red);
            animation: letterGlow 2s infinite alternate;
            font-family: 'Arial Black', 'Helvetica Neue', Helvetica, Arial, sans-serif;
        }

        .loader-text {
            margin-top: 20px;
            font-size: 24px;
            font-weight: bold;
            color: white;
            animation: fadeInOut 2s infinite;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        /* ========== SCREENS ========== */
        .screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000;
            overflow-y: auto;
            opacity: 0;
            animation: fadeIn 0.5s forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        .screen.active {
            display: block;
            opacity: 1;
        }

        /* ========== LOGIN SCREEN ========== */
        .login-screen {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
                        url('https://assets.nflxext.com/ffe/siteui/vlv3/5e16108c-fd30-46de-9bb8-0b4e1bbbc509/29d8d7d7-83cc-4b5f-aa9b-6fd4f68bfaa6/BR-en-20240205-popsignuptwoweeks-perspective_alpha_website_large.jpg');
            background-size: cover;
            background-position: center;
        }

        .login-header {
            padding: 20px 60px;
            position: relative;
            z-index: 10;
        }

        .login-logo {
            font-size: 36px;
            font-weight: 900;
            color: var(--primary-red);
            text-decoration: none;
            display: flex;
            align-items: center;
        }

        .login-logo i {
            margin-right: 8px;
        }

        /* Container da imagem do logo */
        .logo-image-container {
            text-align: center;
            margin-bottom: 30px;
        }

        .logo-image {
            max-width: 200px;
            height: auto;
            margin: 0 auto;
            display: block;
        }

        .login-container {
            max-width: 450px;
            margin: 30px auto 100px; /* Ajuste para acomodar a imagem */
            background-color: rgba(0, 0, 0, 0.75);
            padding: 60px 68px 40px;
            border-radius: 4px;
        }

        .login-title {
            font-size: 32px;
            margin-bottom: 28px;
            font-weight: 700;
            text-align: center;
        }

        .login-form {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .input-group {
            position: relative;
        }

        .login-input {
            width: 100%;
            height: 50px;
            background: #333;
            border: none;
            border-radius: 4px;
            color: white;
            padding: 16px 20px 0;
            font-size: 16px;
        }

        .login-input:focus {
            background: #454545;
            outline: none;
        }

        .login-label {
            position: absolute;
            top: 50%;
            left: 20px;
            transform: translateY(-50%);
            color: #8c8c8c;
            font-size: 16px;
            pointer-events: none;
            transition: all 0.2s ease;
        }

        .login-input:focus + .login-label,
        .login-input:not(:placeholder-shown) + .login-label {
            top: 7px;
            font-size: 11px;
        }

        .login-button {
            background-color: var(--primary-red);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 700;
            padding: 16px;
            margin-top: 24px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .login-button:hover {
            background-color: #f6121d;
        }

        .login-help {
            display: flex;
            justify-content: space-between;
            margin-top: 12px;
            font-size: 13px;
            color: #b3b3b3;
        }

        .remember-me {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .need-help {
            color: #b3b3b3;
            text-decoration: none;
        }

        .login-signup {
            margin-top: 16px;
            color: #737373;
            font-size: 16px;
        }

        .login-signup a {
            color: white;
            text-decoration: none;
        }

        .login-signup a:hover {
            text-decoration: underline;
        }

        .login-captcha {
            margin-top: 13px;
            font-size: 13px;
            color: #8c8c8c;
        }

        /* ========== PROFILES SCREEN ========== */
        .profiles-screen {
            background-color: var(--dark-bg);
            overflow-y: auto;
        }

        .profiles-header {
            padding: 20px 60px;
            position: relative;
            z-index: 10;
        }

        .profiles-container {
            max-width: 800px;
            margin: 100px auto;
            text-align: center;
            padding: 20px;
        }

        .profiles-title {
            font-size: 3.5vw;
            margin-bottom: 20px;
            font-weight: 400;
        }

        .profiles-list {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 40px 0;
            flex-wrap: wrap;
        }

        .profile-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: transform 0.2s;
            width: 150px;
        }

        .profile-item:hover {
            transform: scale(1.05);
        }

        .profile-avatar {
            width: 150px;
            height: 150px;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 15px;
            position: relative;
            border: 3px solid transparent;
            transition: border-color 0.2s;
        }

        .profile-item:hover .profile-avatar {
            border-color: white;
        }

        .profile-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-name {
            font-size: 20px;
            color: #808080;
            transition: color 0.2s;
        }

        .profile-item:hover .profile-name {
            color: white;
        }

        .profile-add {
            width: 150px;
            height: 150px;
            border-radius: 4px;
            background: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            border: 3px dashed #666;
            cursor: pointer;
            transition: all 0.2s;
        }

        .profile-add:hover {
            background: #404040;
            border-color: #999;
        }

        .profile-add-icon {
            font-size: 60px;
            color: #666;
        }

        .profiles-manage {
            margin-top: 60px;
        }

        .manage-profiles-btn {
            background: transparent;
            border: 1px solid #808080;
            color: #808080;
            padding: 10px 30px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .manage-profiles-btn:hover {
            color: white;
            border-color: white;
        }

        /* ========== MANAGE PROFILES MODAL ========== */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--dark-bg);
            border-radius: 8px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 600;
        }

        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
        }

        .profile-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-label {
            color: var(--gray-text);
            font-size: 14px;
        }

        .form-input {
            background: #333;
            border: 1px solid #444;
            border-radius: 4px;
            color: white;
            padding: 12px;
            font-size: 16px;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-red);
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: opacity 0.2s;
        }

        .btn:hover {
            opacity: 0.9;
        }

        .btn-primary {
            background: var(--primary-red);
            color: white;
        }

        .btn-secondary {
            background: #333;
            color: white;
        }

        .btn-danger {
            background: #d32f2f;
            color: white;
        }

        .btn-success {
            background: #388e3c;
            color: white;
        }

        .btn-small {
            padding: 4px 8px;
            font-size: 12px;
        }

        .profile-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            justify-content: flex-end;
        }

        /* ========== MAIN APP SCREEN ========== */
        .app-screen {
            padding-bottom: 80px;
            overflow-y: auto;
            height: 100vh;
        }

        /* Player Overlay - CORRIGIDO para não aparecer automaticamente */
        #playerOverlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.98);
            z-index: 2000;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding-top: 0;
        }

        #playerOverlay.active {
            display: flex;
        }

        /* Container do Player (Vídeo) */
        #playerContainer {
            width: 100%;
            height: auto;
            aspect-ratio: 16 / 9;
            max-width: 1300px;
            background-color: #000;
            border-radius: 0;
            overflow: hidden;
            position: relative;
            box-shadow: none;
        }

        /* Botão de fechar */
        #closePlayer {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            font-size: 18px;
            cursor: pointer;
            z-index: 2001;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
        }

        #closePlayer:hover {
            background: var(--primary-red);
        }

        /* Player em si */
        #player {
            width: 100%;
            height: 100%;
            background: #000;
        }

        /* Novo bloco de detalhes do conteúdo */
        #contentDetails {
            width: 100%;
            max-width: 1300px;
            padding: 20px;
            color: white;
            overflow-y: auto;
            flex-grow: 1;
        }

        .content-title-main {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--light-text);
        }

        .content-info-block {
            margin-bottom: 20px;
            padding: 15px;
            background-color: var(--darker-bg);
            border-radius: 8px;
        }

        .info-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--primary-red);
        }

        .info-text {
            font-size: 16px;
            line-height: 1.6;
            color: var(--gray-text);
        }

        /* Loading */
        .loading {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 3000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary-red);
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        .loading-text {
            color: white;
            font-size: 18px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Header */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 60px;
            background: linear-gradient(180deg, rgba(0,0,0,0.9) 0%, transparent 100%);
            position: fixed;
            width: 100%;
            z-index: 100;
            transition: background-color 0.3s;
        }

        .navbar.scrolled {
            background-color: var(--dark-bg);
        }

        /* Logo com imagem */
        .logo-container {
            display: flex;
            align-items: center;
            gap: 15px;
            text-decoration: none;
        }

        .logo-image-nav {
            height: 40px;
            width: auto;
        }

        .logo-text {
            font-size: 28px;
            font-weight: 900;
            color: var(--primary-red);
            display: flex;
            align-items: center;
        }

        .logo-text i {
            margin-right: 8px;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 25px;
        }

        .nav-links a {
            color: var(--gray-text);
            text-decoration: none;
            font-size: 15px;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: var(--light-text);
        }

        /* Profile Dropdown - CORRIGIDO para abrir para baixo */
        .profile-dropdown {
            display: none;
            position: absolute;
            bottom: -200px; /* Aumentado para acomodar novo botão */
            right: 0;
            background: var(--dark-bg);
            border-radius: 4px;
            min-width: 200px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.5);
            z-index: 1001;
            border: 1px solid #333;
        }

        .profile-dropdown:before {
            content: '';
            position: absolute;
            top: -10px;
            right: 20px;
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-bottom: 10px solid var(--dark-bg);
        }

        .profile-menu:hover .profile-dropdown {
            display: block;
        }

        .dropdown-item {
            padding: 12px 20px;
            color: white;
            text-decoration: none;
            display: block;
            border-bottom: 1px solid #333;
            cursor: pointer;
            font-size: 14px;
        }

        .dropdown-item:hover {
            background: #333;
        }

        .dropdown-item.logout {
            color: var(--primary-red);
            font-weight: 600;
        }

        /* Hero Banner */
        .hero {
            height: 85vh;
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.7)), 
                        url('https://images.unsplash.com/photo-1574267432553-4b4628081c31?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1631&q=80');
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            padding: 0 60px;
            position: relative;
            margin-top: 80px;
        }

        .hero-content {
            max-width: 650px;
            z-index: 2;
        }

        .hero-title {
            font-size: 60px;
            font-weight: 900;
            margin-bottom: 20px;
            line-height: 1.1;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .hero-description {
            font-size: 20px;
            line-height: 1.5;
            margin-bottom: 30px;
            color: #E0E0E0;
        }

        .hero-buttons {
            display: flex;
            gap: 15px;
        }

        .btn-play {
            background-color: var(--primary-red);
            color: white;
            border: none;
            padding: 12px 35px;
            border-radius: 4px;
            font-size: 18px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: opacity 0.3s;
        }

        .btn-play:hover {
            opacity: 0.9;
        }

        /* Content Rows */
        .content-section {
            padding: 40px 60px;
            display: none;
        }

        .content-section.active {
            display: block;
        }

        .row-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .row-title {
            font-size: 22px;
            font-weight: 600;
        }

        .content-row {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding-bottom: 20px;
            scrollbar-width: thin;
        }

        .content-row::-webkit-scrollbar {
            height: 8px;
        }

        .content-row::-webkit-scrollbar-thumb {
            background-color: rgba(255,255,255,0.3);
            border-radius: 4px;
        }

        .content-item {
            min-width: 220px;
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.3s;
            position: relative;
            cursor: pointer;
            background: var(--card-bg);
        }

        .content-item:hover {
            transform: scale(1.05);
            z-index: 10;
        }

        .content-img {
            width: 100%;
            height: 125px;
            background-color: #1a1a1a;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            background-size: cover;
            background-position: center;
        }

        .content-info {
            padding: 15px;
        }

        .content-title {
            font-size: 16px;
            margin-bottom: 5px;
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .content-meta {
            font-size: 13px;
            color: var(--gray-text);
        }

        /* Continue Watching */
        .continue-watching {
            position: relative;
        }

        .remove-continue {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            z-index: 11;
        }

        .continue-watching:hover .remove-continue {
            display: flex;
        }

        /* Menu Inferior Virtual */
        .bottom-menu {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: var(--bottom-menu-bg);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 1000;
            padding: 10px 0;
        }

        .menu-items {
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 0 10px;
        }

        .menu-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--gray-text);
            text-decoration: none;
            transition: all 0.3s;
            padding: 8px 5px;
            border-radius: 8px;
            min-width: 60px;
        }

        .menu-item:hover,
        .menu-item.active {
            color: var(--light-text);
            background-color: rgba(255, 255, 255, 0.1);
        }

        .menu-icon {
            font-size: 20px;
            margin-bottom: 5px;
        }

        .menu-label {
            font-size: 11px;
            font-weight: 500;
        }

        /* Profile Menu */
        .profile-menu {
            position: relative;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .navbar {
                padding: 10px 20px;
            }

            .logo-image-nav {
                height: 30px;
            }

            .logo-text {
                font-size: 20px;
            }

            .nav-links {
                display: none;
            }

            .hero {
                padding: 0 20px;
                height: 70vh;
            }

            .hero-title {
                font-size: 40px;
            }

            .hero-description {
                font-size: 16px;
            }

            .content-section {
                padding: 20px;
            }

            .content-item {
                min-width: 150px;
            }

            .login-container {
                margin: 30px 20px 50px;
                padding: 30px;
            }

            .logo-image {
                max-width: 150px;
            }

            /* Ajuste para animação de carregamento */
            .logo-letter-container {
                width: 150px;
                height: 150px;
            }
            
            .logo-letter, .letter-f, .logo-letter-glow {
                font-size: 80px;
            }
            
            .logo-text-full {
                font-size: 50px;
            }

            .profiles-container {
                margin: 50px 20px;
            }

            .profiles-title {
                font-size: 24px;
            }

            .profile-avatar {
                width: 100px;
                height: 100px;
            }

            .profile-add {
                width: 100px;
                height: 100px;
            }
        }

        /* No vertical scrollbar */
        ::-webkit-scrollbar {
            width: 0px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body>
    <!-- ========== ANIMAÇÃO DE ENTRADA MODIFICADA ========== -->
    	
    <div id="loadingScreen" class="loading-screen">
        <!-- OPÇÃO 1: Apenas a letra F (escolha esta opção se quiser apenas uma letra) -->
        <div class="logo-letter-container">
            <div class="letter-f">FLIX</div>
        </div>
        
        <!-- OPÇÃO 2: Texto completo "FLIX TV" (comente a opção 1 e descomente esta se quiser texto completo) -->
        <!--
        <div class="logo-letter-container">
            <div class="logo-text-full">FLIX TV</div>
        </div>
        -->
        
        <!-- OPÇÃO 3: Letra com brilho mais forte (comente as outras opções) -->
        <!--
        <div class="logo-letter-container">
            <div class="logo-letter-glow">F</div>
        </div>
        -->
        
        <div class="loader-text">FLIX TV ESTÁ CARREGADOR....</div>
    </div>

    <!-- ========== LOGIN SCREEN ========== -->
    <div id="loginScreen" class="screen">
        <header class="login-header">
            <a href="#" class="login-logo"><i class="fas fa-play-circle"></i> FLIX TV</a>
        </header>
        
        <div class="login-container">
            <!-- Imagem logo adicionada aqui -->
            <div class="logo-image-container">
                <img src="https://i.imgur.com/YOUR-LOGO-IMAGE.png" alt="FLIX TV Logo" class="logo-image" id="loginLogoImage">
            </div>
            
            <h1 class="login-title">Entrar</h1>
            
            <form id="loginForm" class="login-form">
                <div class="input-group">
                    <input type="text" class="login-input" id="loginUsername" placeholder=" " required>
                    <label for="loginUsername" class="login-label">Email ou número de telefone</label>
                </div>
                
                <div class="input-group">
                    <input type="password" class="login-input" id="loginPassword" placeholder=" " required>
                    <label for="loginPassword" class="login-label">Senha</label>
                </div>
                
                <button type="submit" class="login-button">Entrar</button>
                
                <div class="login-help">
                    <label class="remember-me">
                        <input type="checkbox" id="rememberMe">
                        Lembre-se de mim
                    </label>
                    <a href="#" class="need-help">Precisa de ajuda?</a>
                </div>
                
                <div class="login-signup">
                    Novo por aqui? <a href="#" id="signupLink">Assine agora</a>.
                </div>
                
                <div class="login-captcha">
                    Esta página é protegida pelo Google reCAPTCHA para garantir que você não é um robô.
                </div>
            </form>
        </div>
    </div>

    <!-- ========== PROFILES SCREEN ========== -->
    <div id="profilesScreen" class="screen">
        <header class="profiles-header">
            <a href="#" class="login-logo"><i class="fas fa-play-circle"></i> FLIX TV</a>
        </header>
        
        <div class="profiles-container">
            <h1 class="profiles-title">Quem está assistindo?</h1>
            
            <div class="profiles-list" id="profilesList">
                <!-- Profiles will be loaded here -->
            </div>
            
            <div class="profiles-manage">
                <button class="manage-profiles-btn" id="manageProfilesBtn">GERENCIAR PERFIS</button>
            </div>
        </div>
    </div>

    <!-- ========== MAIN APP SCREEN ========== -->
    <div id="appScreen" class="screen">
        <!-- Player Overlay -->
        <div id="playerOverlay">
            <button id="closePlayer"><i class="fas fa-times"></i></button>
            <div id="playerContainer">
                <video id="player" playsinline controls></video>
            </div>
            <!-- Novo bloco de detalhes do conteúdo -->
            <div id="contentDetails">
                <h3 class="content-title-main" id="contentTitleMain"></h3>
                <!-- O conteúdo específico (Guia, TMDB) será injetado aqui via JS -->
                <div id="contentSpecificInfo"></div>
            </div>
        </div>

        <!-- Loading -->
        <div id="loading" class="loading">
            <div class="loading-spinner"></div>
            <div class="loading-text" id="loadingText">Carregando...</div>
        </div>

        <!-- Header -->
        <nav class="navbar">
            <!-- Logo com imagem -->
            <a href="#" class="logo-container">
                <img src="https://i.imgur.com/YOUR-LOGO-IMAGE.png" alt="FLIX TV Logo" class="logo-image-nav" id="navLogoImage">
                <span class="logo-text"><i class="fas fa-play-circle"></i> FLIX TV</span>
            </a>
            
            <ul class="nav-links">
                <li><a href="#" class="active" data-section="home">Início</a></li>
                <li><a href="#" data-section="tv">TV</a></li>
                <li><a href="#" data-section="filmes">Filmes</a></li>
                <li><a href="#" data-section="series">Séries</a></li>
            </ul>
            
            <div class="profile-menu">
                <div class="menu-item" id="profileMenuBtn">
                    <div class="menu-icon">
                        <i class="fas fa-user"></i>
                    </div>
                    <span class="menu-label" id="currentProfileName">Perfil</span>
                </div>
                
                <div class="profile-dropdown">
                    <a href="#" class="dropdown-item" id="switchProfileBtn">Trocar Perfil</a>
                    <a href="#" class="dropdown-item" id="manageProfileBtn">Gerenciar Perfis</a>
                    <!-- NOVO: Botão de Painel ADM (só aparece para administradores) -->
                    <a href="#" class="dropdown-item" id="adminPanelBtn" style="display: none;">
                        <i class="fas fa-cogs"></i> Painel ADM
                    </a>
                    <a href="#" class="dropdown-item logout" id="logoutBtn">Sair</a>
                </div>
            </div>
        </nav>

        <!-- Hero Banner -->
        <section class="hero">
            <div class="hero-content">
                <h1 class="hero-title">O Melhor Conteúdo de Streaming</h1>
                <p class="hero-description">Assista a milhares de filmes, séries e canais de TV ao vivo, onde e quando quiser.</p>
                <div class="hero-buttons">
                    <button class="btn-play" id="heroPlayBtn">
                        <i class="fas fa-play"></i> Ver Demonstração
                    </button>
                </div>
            </div>
        </section>

        <!-- Continue Watching -->
        <section class="content-section" id="continueSection">
            <div class="row-header">
                <h2 class="row-title">Continuar Assistindo</h2>
            </div>
            <div class="content-row" id="continueWatchingRow">
                <!-- Continue watching content will be loaded here -->
            </div>
        </section>

        <!-- Content Sections -->
        <div id="contentSections">
            <!-- Home Content -->
            <section class="content-section home-section active">
                <div class="row-header">
                    <h2 class="row-title">Conteúdos em Destaque</h2>
                </div>
                <div class="content-row" id="homeRow">
                    <!-- Conteúdo será carregado aqui -->
                </div>
            </section>

            <!-- TV Content -->
            <section class="content-section tv-section">
                <div class="row-header">
                    <h2 class="row-title">Canais de TV ao Vivo</h2>
                </div>
                <div class="content-row" id="tvRow">
                    <!-- Conteúdo será carregado aqui -->
                </div>
            </section>

            <!-- Filmes Content -->
            <section class="content-section filmes-section">
                <div class="row-header">
                    <h2 class="row-title">Filmes</h2>
                </div>
                <div class="content-row" id="filmesRow">
                    <!-- Conteúdo será carregado aqui -->
                </div>
            </section>

            <!-- Séries Content -->
            <section class="content-section series-section">
                <div class="row-header">
                    <h2 class="row-title">Séries</h2>
                </div>
                <div class="content-row" id="seriesRow">
                    <!-- Conteúdo será carregado aqui -->
                </div>
            </section>
        </div>

        <!-- Menu Inferior Virtual -->
        <div class="bottom-menu">
            <div class="menu-items">
                <a href="#" class="menu-item active" data-section="home">
                    <div class="menu-icon">
                        <i class="fas fa-home"></i>
                    </div>
                    <span class="menu-label">INÍCIO</span>
                </a>
                
                <a href="#" class="menu-item" data-section="tv">
                    <div class="menu-icon">
                        <i class="fas fa-tv"></i>
                    </div>
                    <span class="menu-label">TV</span>
                </a>
                
                <a href="#" class="menu-item" data-section="filmes">
                    <div class="menu-icon">
                        <i class="fas fa-film"></i>
                    </div>
                    <span class="menu-label">FILMES</span>
                </a>
                
                <a href="#" class="menu-item" data-section="series">
                    <div class="menu-icon">
                        <i class="fas fa-list"></i>
                    </div>
                    <span class="menu-label">SÉRIES</span>
                </a>
                
                <a href="#" class="menu-item" id="refreshBtn">
                    <div class="menu-icon">
                        <i class="fas fa-sync"></i>
                    </div>
                    <span class="menu-label">ATUALIZAR</span>
                </a>
            </div>
        </div>

        <footer>
            <div class="social-icons">
                <i class="fab fa-facebook social-icon"></i>
                <i class="fab fa-instagram social-icon"></i>
                <i class="fab fa-twitter social-icon"></i>
                <i class="fab fa-youtube social-icon"></i>
            </div>
            
            <p class="copyright">&copy; 2024 FLIX TV. Todos os direitos reservados.</p>
        </footer>
    </div>

    <!-- ========== MODALS ========== -->
    <!-- Manage Profiles Modal -->
    <div id="manageProfilesModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Gerenciar Perfis</h2>
                <button class="close-modal" id="closeManageModal">&times;</button>
            </div>
            
            <div id="profilesEditList">
                <!-- Profiles edit form will be loaded here -->
            </div>
            
            <button class="btn btn-primary" id="addProfileBtn" style="margin-top: 20px; width: 100%;">
                <i class="fas fa-plus"></i> Adicionar Novo Perfil
            </button>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div id="editProfileModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title" id="editProfileTitle">Editar Perfil</h2>
                <button class="close-modal" id="closeEditModal">&times;</button>
            </div>
            
            <form id="editProfileForm" class="profile-form">
                <input type="hidden" id="editProfileIndex">
                
                <div class="form-group">
                    <label class="form-label" for="profileName">Nome do Perfil</label>
                    <input type="text" class="form-input" id="profileName" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="profileAvatar">Avatar (URL da imagem)</label>
                    <input type="text" class="form-input" id="profileAvatar" 
                           placeholder="https://exemplo.com/avatar.jpg">
                </div>
                
                <div class="profile-actions">
                    <button type="button" class="btn btn-secondary" id="cancelEditBtn">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar Alterações</button>
                </div>
            </form>
        </div>
    </div>

    <!-- HLS.js para suporte a M3U8 -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@1.4.10/dist/hls.min.js"></script>
    <script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>

    <script>
        // ==============================================
        // CONFIGURAÇÃO INICIAL
        // ==============================================
        // URLs dos feeds RSS
        const FEED_CONFIG = {
            home: 'https://raw.githubusercontent.com/Fu6rfho5zf/FlixTv4k/refs/heads/main/FlixHome.rss',
            tv: 'https://raw.githubusercontent.com/Fu6rfho5zf/FlixTv4k/refs/heads/main/FlixCanais.rss',
            filmes: 'https://raw.githubusercontent.com/Fu6rfho5zf/FlixTv4k/refs/heads/main/FlixFilmes.rss',
            series: 'https://raw.githubusercontent.com/Fu6rfho5zf/FlixTv4k/refs/heads/main/FlixSeries.rss',
            epg: 'https://raw.githubusercontent.com/Fu6rfho5zf/FlixTv4k/refs/heads/main/FlixEpg.rss',
            login: 'https://raw.githubusercontent.com/Fu6rfho5zf/FlixTv4k/refs/heads/main/FlixLogin.rss'
        };

        // URLs alternativas caso as principais falhem
        const BACKUP_FEEDS = {
            home: 'https://raw.githubusercontent.com/Fu6rfho5zf/FlixTv4k/refs/heads/main/FlixHome.rss',
            tv: 'https://raw.githubusercontent.com/Fu6rfho5zf/FlixTv4k/refs/heads/main/FlixCanais.rss',
            filmes: 'https://raw.githubusercontent.com/Fu6rfho5zf/FlixTv4k/refs/heads/main/FlixFilmes.rss',
            series: 'https://raw.githubusercontent.com/Fu6rfho5zf/FlixTv4k/refs/heads/main/FlixSeries.rss',
            epg: 'https://raw.githubusercontent.com/Fu6rfho5zf/FlixTv4k/refs/heads/main/FlixEpg.rss',
            login: 'https://raw.githubusercontent.com/Fu6rfho5zf/FlixTv4k/refs/heads/main/FlixLogin.rss'
        };

        // ==============================================
        // VARIÁVEIS GLOBAIS
        // ==============================================
        let currentPlayer = null;
        let hls = null;
        let currentContent = null;
        let currentUser = null;
        let currentProfile = null;
        let profilesData = null;
        let continueWatching = [];

        // ==============================================
        // CONFIGURAÇÃO DA IMAGEM DO LOGO
        // ==============================================
        const LOGO_IMAGE_URL = 'https://i.imgur.com/YOUR-LOGO-IMAGE.png'; // Altere para sua imagem
        
        // Função para configurar as imagens do logo
        function setupLogoImages() {
            const loginLogo = document.getElementById('loginLogoImage');
            const navLogo = document.getElementById('navLogoImage');
            
            if (loginLogo) loginLogo.src = LOGO_IMAGE_URL;
            if (navLogo) navLogo.src = LOGO_IMAGE_URL;
        }

        // ==============================================
        // ANIMAÇÃO DE ENTRADA
        // ==============================================
        function showLoadingAnimation() {
            setTimeout(() => {
                document.getElementById('loadingScreen').style.display = 'none';
                setupLogoImages(); // Configurar imagens do logo
                checkLoginStatus();
            }, 2500);
        }

        // ==============================================
        // SISTEMA DE LOGIN CORRIGIDO
        // ==============================================

        // Função corrigida para carregar usuários do feed RSS
        async function loadUsersFromFeed() {
            try {
                // URL principal do feed de login
                const loginUrl = FEED_CONFIG.login;
                
                // Tentar carregar diretamente
                const proxyUrl = 'https://corsproxy.io/?' + encodeURIComponent(loginUrl);
                const response = await fetch(proxyUrl, { 
                    method: 'GET',
                    headers: {
                        'Accept': 'application/xml, text/xml',
                        'Cache-Control': 'no-cache'
                    }
                });
                
                if (!response.ok) {
                    console.error('Erro ao carregar feed de login:', response.status);
                    return null;
                }
                
                const xmlContent = await response.text();
                
                // Parse do XML
                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(xmlContent, 'text/xml');
                
                const users = [];
                const userItems = xmlDoc.querySelectorAll('item');
                
                if (userItems.length === 0) {
                    console.log('Nenhum usuário encontrado no feed');
                    return null;
                }
                
                userItems.forEach(item => {
                    const username = item.querySelector('username')?.textContent || 
                                   item.querySelector('title')?.textContent;
                    const password = item.querySelector('password')?.textContent;
                    const subscription = item.querySelector('subscription')?.textContent || 'premium';
                    const expiry = item.querySelector('expiry')?.textContent || '2025-12-31';
                    const cargo = item.querySelector('cargo')?.textContent || 'user';
                    
                    if (username && password) {
                        users.push({
                            username: username.trim(),
                            password: password.trim(),
                            subscription: subscription.trim(),
                            expiry: expiry.trim(),
                            cargo: cargo.trim(),
                            servers: [
                                FEED_CONFIG.home,
                                FEED_CONFIG.tv,
                                FEED_CONFIG.filmes,
                                FEED_CONFIG.series,
                                FEED_CONFIG.epg
                            ],
                            profiles: {
                                PerfilSave01: {
                                    name: username.split(' ')[0] || 'Usuário',
                                    avatar: `https://i.pravatar.cc/150?img=${Math.floor(Math.random() * 70) + 1}`,
                                    settings: {}
                                },
                                PerfilSave02: {
                                    name: 'Convidado',
                                    avatar: 'https://i.pravatar.cc/150?img=3',
                                    settings: {}
                                }
                            }
                        });
                    }
                });
                
                console.log(`${users.length} usuário(s) carregado(s) do feed`);
                return users.length > 0 ? users : null;
                
            } catch (error) {
                console.error('Erro ao carregar usuários do feed:', error);
                return null;
            }
        }

        // Função para autenticar usuário (CORRIGIDA)
        async function authenticateUser(username, password) {
            showLoading('Verificando credenciais...');
            
            try {
                // Primeiro tentar carregar do feed RSS
                const users = await loadUsersFromFeed();
                
                if (users) {
                    const user = users.find(u => 
                        u.username === username && u.password === password
                    );
                    
                    if (user) {
                        console.log('Usuário autenticado via feed RSS:', username);
                        currentUser = user;
                        profilesData = user.profiles;
                        
                        // Salvar credenciais se "Lembre-se de mim" estiver marcado
                        if (document.getElementById('rememberMe').checked) {
                            localStorage.setItem('savedUsername', username);
                            localStorage.setItem('savedPassword', password);
                        } else {
                            localStorage.removeItem('savedUsername');
                            localStorage.removeItem('savedPassword');
                        }
                        
                        // Salvar dados do usuário
                        localStorage.setItem('savedUser', JSON.stringify(user));
                        
                        // Carregar primeiro perfil como padrão
                        const profileKeys = Object.keys(profilesData);
                        if (profileKeys.length > 0) {
                            currentProfile = profilesData[profileKeys[0]];
                            document.getElementById('currentProfileName').textContent = currentProfile.name;
                        }
                        
                        // Verificar se é administrador para mostrar botão do painel
                        checkAdminStatus();
                        
                        // Carregar continue assistindo do localStorage
                        loadContinueWatching();
                        
                        // Mostrar tela de perfis
                        showProfilesScreen();
                        
                        return true;
                    }
                }
                
                // Fallback para login temporário (mantido para compatibilidade)
                if (username === 'admin' && password === 'admin123') {
                    console.log('Usuário autenticado via fallback:', username);
                    currentUser = {
                        username: 'admin',
                        password: 'admin123',
                        subscription: 'premium',
                        expiry: '2025-12-31',
                        cargo: 'superadmin',
                        servers: [
                            FEED_CONFIG.home,
                            FEED_CONFIG.tv,
                            FEED_CONFIG.filmes,
                            FEED_CONFIG.series,
                            FEED_CONFIG.epg
                        ],
                        profiles: {
                            PerfilSave01: {
                                name: 'Admin',
                                avatar: 'https://i.pravatar.cc/150?img=1',
                                settings: {}
                            },
                            PerfilSave02: {
                                name: 'Convidado',
                                avatar: 'https://i.pravatar.cc/150?img=3',
                                settings: {}
                            }
                        }
                    };
                    
                    profilesData = currentUser.profiles;
                    
                    // Salvar dados
                    if (document.getElementById('rememberMe').checked) {
                        localStorage.setItem('savedUsername', username);
                        localStorage.setItem('savedPassword', password);
                    }
                    
                    localStorage.setItem('savedUser', JSON.stringify(currentUser));
                    
                    // Carregar perfil
                    currentProfile = profilesData['PerfilSave01'];
                    document.getElementById('currentProfileName').textContent = currentProfile.name;
                    
                    // Verificar se é administrador para mostrar botão do painel
                    checkAdminStatus();
                    
                    loadContinueWatching();
                    showProfilesScreen();
                    
                    return true;
                }
                
                // Se chegou aqui, as credenciais estão incorretas
                throw new Error('Usuário ou senha incorretos');
                
            } catch (error) {
                alert(error.message);
                return false;
            } finally {
                hideLoading();
            }
        }

        // Função para verificar se o usuário é administrador
        function checkAdminStatus() {
            const adminPanelBtn = document.getElementById('adminPanelBtn');
            
            if (currentUser && (currentUser.cargo === 'admin' || currentUser.cargo === 'superadmin' || currentUser.cargo === 'administrador')) {
                // Mostrar botão do painel ADM
                adminPanelBtn.style.display = 'block';
            } else {
                // Ocultar botão do painel ADM
                adminPanelBtn.style.display = 'none';
            }
        }

        // ==============================================
        // SISTEMA DE PERFIS
        // ==============================================

        // Função para renderizar perfis
        function renderProfiles() {
            const profilesList = document.getElementById('profilesList');
            profilesList.innerHTML = '';
            
            Object.keys(profilesData).forEach((profileId, index) => {
                const profile = profilesData[profileId];
                
                const profileItem = document.createElement('div');
                profileItem.className = 'profile-item';
                profileItem.dataset.profileId = profileId;
                
                profileItem.innerHTML = `
                    <div class="profile-avatar">
                        <img src="${profile.avatar}" alt="${profile.name}">
                    </div>
                    <div class="profile-name">${profile.name}</div>
                `;
                
                profileItem.addEventListener('click', () => {
                    selectProfile(profileId);
                });
                
                profilesList.appendChild(profileItem);
            });
            
            // Adicionar botão de novo perfil
            const addProfile = document.createElement('div');
            addProfile.className = 'profile-item';
            
            addProfile.innerHTML = `
                <div class="profile-add" id="addProfileBtn">
                    <div class="profile-add-icon">+</div>
                </div>
                <div class="profile-name">Adicionar Perfil</div>
            `;
            
            addProfile.addEventListener('click', () => {
                openEditProfileModal();
            });
            
            profilesList.appendChild(addProfile);
        }

        // Função para selecionar perfil
        function selectProfile(profileId) {
            currentProfile = profilesData[profileId];
            document.getElementById('currentProfileName').textContent = currentProfile.name;
            
            // Salvar perfil selecionado no localStorage
            localStorage.setItem('currentProfile', profileId);
            
            // Entrar no app
            showAppScreen();
            
            // Carregar conteúdo
            loadSectionContent('home');
        }

        // Função para renderizar gerenciamento de perfis
        function renderManageProfiles() {
            const profilesEditList = document.getElementById('profilesEditList');
            profilesEditList.innerHTML = '';
            
            Object.keys(profilesData).forEach((profileId, index) => {
                const profile = profilesData[profileId];
                
                const profileItem = document.createElement('div');
                profileItem.className = 'profile-form';
                profileItem.style.marginBottom = '20px';
                profileItem.style.padding = '15px';
                profileItem.style.background = '#1a1a1a';
                profileItem.style.borderRadius = '4px';
                
                profileItem.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <div style="width: 60px; height: 60px; border-radius: 4px; overflow: hidden;">
                            <img src="${profile.avatar}" alt="${profile.name}" style="width: 100%; height: 100%; object-fit: cover;">
                        </div>
                        <div style="flex: 1;">
                            <div style="font-size: 18px; font-weight: 600; margin-bottom: 5px;">${profile.name}</div>
                            <div style="font-size: 12px; color: var(--gray-text);">
                                ${Object.keys(profilesData).length > 1 ? 'Perfil ' + (index + 1) : 'Perfil Principal'}
                            </div>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-secondary btn-small edit-profile-btn" data-profile-id="${profileId}">
                            <i class="fas fa-edit"></i> Editar
                        </button>
                        ${profileId !== 'PerfilSave01' && profileId !== 'PerfilSave02' ? `
                            <button class="btn btn-danger btn-small delete-profile-btn" data-profile-id="${profileId}">
                                <i class="fas fa-trash"></i> Excluir
                        </button>
                        ` : ''}
                    </div>
                `;
                
                profilesEditList.appendChild(profileItem);
            });
            
            // Adicionar eventos aos botões
            document.querySelectorAll('.edit-profile-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const profileId = e.target.closest('button').dataset.profileId;
                    openEditProfileModal(profileId);
                });
            });
            
            document.querySelectorAll('.delete-profile-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const profileId = e.target.closest('button').dataset.profileId;
                    if (confirm(`Tem certeza que deseja excluir o perfil ${profilesData[profileId].name}?`)) {
                        deleteProfile(profileId);
                    }
                });
            });
        }

        // Função para abrir modal de edição de perfil
        function openEditProfileModal(profileId = null) {
            document.getElementById('editProfileModal').classList.add('active');
            
            if (profileId) {
                // Modo edição
                const profile = profilesData[profileId];
                document.getElementById('editProfileTitle').textContent = 'Editar Perfil';
                document.getElementById('editProfileIndex').value = profileId;
                document.getElementById('profileName').value = profile.name;
                document.getElementById('profileAvatar').value = profile.avatar;
            } else {
                // Modo criação
                document.getElementById('editProfileTitle').textContent = 'Adicionar Perfil';
                document.getElementById('editProfileIndex').value = '';
                document.getElementById('profileName').value = '';
                document.getElementById('profileAvatar').value = '';
            }
        }

        // Função para salvar perfil
        function saveProfile(profileId, profileData) {
            if (profileId) {
                // Editar perfil existente
                profilesData[profileId] = profileData;
            } else {
                // Criar novo perfil
                // Encontrar próximo ID disponível
                let newId = '';
                for (let i = 1; i <= 6; i++) {
                    const testId = `PerfilSave0${i}`;
                    if (!profilesData[testId]) {
                        newId = testId;
                        break;
                    }
                }
                
                if (newId) {
                    profilesData[newId] = profileData;
                } else {
                    alert('Limite máximo de 6 perfis atingido!');
                    return;
                }
            }
            
            // Atualizar dados do usuário
            currentUser.profiles = profilesData;
            localStorage.setItem('savedUser', JSON.stringify(currentUser));
            
            // Atualizar visualização
            renderProfiles();
            renderManageProfiles();
            
            // Fechar modal
            document.getElementById('editProfileModal').classList.remove('active');
        }

        // Função para excluir perfil
        function deleteProfile(profileId) {
            // Não permitir excluir os perfis padrão
            if (profileId === 'PerfilSave01' || profileId === 'PerfilSave02') {
                alert('Não é possível excluir os perfis padrão!');
                return;
            }
            
            delete profilesData[profileId];
            
            // Atualizar dados do usuário
            currentUser.profiles = profilesData;
            localStorage.setItem('savedUser', JSON.stringify(currentUser));
            
            // Atualizar visualização
            renderProfiles();
            renderManageProfiles();
            
            // Se o perfil atual foi excluído, selecionar o principal
            if (currentProfile === profilesData[profileId]) {
                selectProfile('PerfilSave01');
            }
        }

        // ==============================================
        // CONTINUE ASSISTINDO
        // ==============================================

        // Função para carregar continue assistindo
        function loadContinueWatching() {
            const saved = localStorage.getItem('continueWatching');
            if (saved) {
                continueWatching = JSON.parse(saved);
                renderContinueWatching();
            }
        }

        // Função para salvar continue assistindo
        function saveContinueWatching() {
            localStorage.setItem('continueWatching', JSON.stringify(continueWatching));
        }

        // Função para adicionar conteúdo ao continue assistindo
        function addToContinueWatching(content) {
            // Verificar se já existe
            const existingIndex = continueWatching.findIndex(item => item.id === content.id);
            
            if (existingIndex !== -1) {
                // Atualizar se já existe
                continueWatching[existingIndex] = content;
            } else {
                // Adicionar no início
                continueWatching.unshift(content);
                
                // Manter máximo de 10 itens
                if (continueWatching.length > 10) {
                    continueWatching.pop();
                }
            }
            
            // Salvar e renderizar
            saveContinueWatching();
            renderContinueWatching();
        }

        // Função para remover do continue assistindo
        function removeFromContinueWatching(contentId) {
            continueWatching = continueWatching.filter(item => item.id !== contentId);
            saveContinueWatching();
            renderContinueWatching();
        }

        // Função para renderizar continue assistindo
        function renderContinueWatching() {
            const container = document.getElementById('continueWatchingRow');
            container.innerHTML = '';
            
            if (continueWatching.length === 0) {
                document.getElementById('continueSection').style.display = 'none';
                return;
            }
            
            document.getElementById('continueSection').style.display = 'block';
            
            continueWatching.forEach((content, index) => {
                const contentItem = document.createElement('div');
                contentItem.className = 'content-item continue-watching';
                contentItem.dataset.id = content.id;
                
                contentItem.innerHTML = `
                    <button class="remove-continue" data-id="${content.id}">
                        <i class="fas fa-times"></i>
                    </button>
                    <div class="content-img" style="background-image: url('${content.poster}')">
                        <div style="position: absolute; bottom: 10px; left: 10px; background: rgba(0,0,0,0.7); color: white; padding: 2px 8px; border-radius: 3px; font-size: 11px; font-weight: bold;">
                            Continuar
                        </div>
                    </div>
                    <div class="content-info">
                        <h3 class="content-title" title="${content.title}">${content.title}</h3>
                        <div class="content-meta">${content.genre} ${content.year ? '• ' + content.year : ''}</div>
                    </div>
                `;
                
                // Adicionar eventos
                contentItem.addEventListener('click', () => {
                    playContent(content);
                });
                
                const removeBtn = contentItem.querySelector('.remove-continue');
                removeBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    removeFromContinueWatching(content.id);
                });
                
                container.appendChild(contentItem);
            });
        }

        // ==============================================
        // FUNÇÕES DE NAVEGAÇÃO ENTRE TELAS
        // ==============================================

        function checkLoginStatus() {
            const savedUser = localStorage.getItem('savedUser');
            if (savedUser) {
                try {
                    const userData = JSON.parse(savedUser);
                    currentUser = userData;
                    profilesData = userData.profiles;
                    
                    const savedProfile = localStorage.getItem('currentProfile') || 'PerfilSave01';
                    if (profilesData[savedProfile]) {
                        currentProfile = profilesData[savedProfile];
                        document.getElementById('currentProfileName').textContent = currentProfile.name;
                        
                        // Verificar se é administrador para mostrar botão do painel
                        checkAdminStatus();
                        
                        loadContinueWatching();
                        showAppScreen();
                        loadSectionContent('home');
                    } else {
                        showProfilesScreen();
                    }
                } catch (error) {
                    showLoginScreen();
                }
            } else {
                showLoginScreen();
            }
        }

        function showLoginScreen() {
            document.getElementById('loginScreen').classList.add('active');
            document.getElementById('profilesScreen').classList.remove('active');
            document.getElementById('appScreen').classList.remove('active');
            
            // Preencher credenciais salvas
            const savedUsername = localStorage.getItem('savedUsername');
            const savedPassword = localStorage.getItem('savedPassword');
            
            if (savedUsername && savedPassword) {
                document.getElementById('loginUsername').value = savedUsername;
                document.getElementById('loginPassword').value = savedPassword;
                document.getElementById('rememberMe').checked = true;
            }
        }

        function showProfilesScreen() {
            document.getElementById('loginScreen').classList.remove('active');
            document.getElementById('profilesScreen').classList.add('active');
            document.getElementById('appScreen').classList.remove('active');
            renderProfiles();
        }

        function showAppScreen() {
            document.getElementById('loginScreen').classList.remove('active');
            document.getElementById('profilesScreen').classList.remove('active');
            document.getElementById('appScreen').classList.add('active');
        }

        // ==============================================
        // FUNÇÕES DO PLAYER (CORRIGIDAS)
        // ==============================================

        // Função para mostrar loading
        function showLoading(message = 'Carregando...') {
            document.getElementById('loading').style.display = 'flex';
            document.getElementById('loadingText').textContent = message;
        }

        // Função para esconder loading
        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
        }

        // Função principal para carregar conteúdo de uma seção
        async function loadSectionContent(section) {
            showLoading(`Carregando ${section}...`);
            
            try {
                const contentItems = await loadContentFromFeed(section);
                renderContentSection(section, contentItems);
                
            } catch (error) {
                console.error(`Erro ao carregar ${section}:`, error);
                showErrorMessage(section, error.message);
            } finally {
                hideLoading();
            }
        }

        // Função para carregar conteúdo de um feed RSS
        async function loadContentFromFeed(section) {
            // Tenta múltiplas URLs
            const urlsToTry = [
                FEED_CONFIG[section],
                BACKUP_FEEDS[section]
            ];
            
            for (const feedUrl of urlsToTry) {
                if (!feedUrl) continue;
                
                try {
                    const proxyUrl = 'https://corsproxy.io/?' + encodeURIComponent(feedUrl);
                    console.log(`Tentando carregar: ${feedUrl}`);
                    
                    const response = await fetch(proxyUrl, {
                        method: 'GET',
                        headers: {
                            'Accept': 'application/xml, text/xml, */*',
                            'Cache-Control': 'no-cache'
                        }
                    });
                    
                    if (!response.ok) {
                        console.log(`Feed ${feedUrl} retornou ${response.status}`);
                        continue; // Tenta próxima URL
                    }
                    
                    const xmlContent = await response.text();
                    console.log(`Feed ${section} carregado com sucesso`);
                    
                    return parseFeedContent(xmlContent, section);
                    
                } catch (error) {
                    console.error(`Erro ao carregar feed ${feedUrl}:`, error);
                    continue; // Tenta próxima URL
                }
            }
            
            // Se nenhuma URL funcionou, retorna fallback
            console.log(`Todas as URLs falharam para ${section}, usando conteúdo de fallback`);
            return getFallbackContent(section);
        }

        // Função para parsear o conteúdo do feed RSS
        function parseFeedContent(xmlContent, section) {
            const contentItems = [];
            
            try {
                // Limpar comentários
                xmlContent = xmlContent.replace(/<!--[\s\S]*?-->/g, '');
                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(xmlContent, 'text/xml');
                
                // Verificar se é um feed RSS padrão
                const items = xmlDoc.querySelectorAll('item');
                
                if (items.length === 0) {
                    // Tentar formato alternativo para TV (que pode estar vazio ou em outro formato)
                    if (section === 'tv') {
                        return getFallbackContent(section);
                    }
                    // Tentar parsear como formato com <show>
                    const shows = xmlDoc.querySelectorAll('show');
                    if (shows.length > 0) {
                        return parseShowFormat(shows, section);
                    }
                    return getFallbackContent(section);
                }
                
                // Parsear formato RSS padrão (<item>)
                for (let i = 0; i < items.length; i++) {
                    const item = items[i];
                    
                    // Extrair título
                    const titleElement = item.querySelector('title');
                    const title = titleElement ? titleElement.textContent.trim() : `Conteúdo ${i + 1}`;
                    
                    // Extrair descrição
                    const descriptionElement = item.querySelector('description');
                    const description = descriptionElement ? descriptionElement.textContent.trim() : '';
                    
                    // Extrair categoria (gênero)
                    const categoryElement = item.querySelector('category');
                    const genre = categoryElement ? categoryElement.textContent.trim() : section;
                    
                    // Extrair URL do vídeo
                    let videoUrl = '';
                    
                    // Tentar várias formas de encontrar a URL do vídeo
                    const mediaContent = item.querySelector('media\\:content');
                    if (mediaContent && mediaContent.getAttribute('url')) {
                        videoUrl = mediaContent.getAttribute('url');
                    } else {
                        const contentElement = item.querySelector('content');
                        if (contentElement && contentElement.getAttribute('url')) {
                            videoUrl = contentElement.getAttribute('url');
                        } else {
                            // Tentar encontrar URL no texto do item
                            const itemText = item.textContent;
                            const urlMatch = itemText.match(/(https?:\/\/[^\s<>"]+\.(?:m3u8|mp4|ts|mkv))/i);
                            if (urlMatch) {
                                videoUrl = urlMatch[1];
                            }
                        }
                    }
                    
                    // Extrair URL da thumbnail
                    let thumbnailUrl = '';
                    const mediaThumbnail = item.querySelector('media\\:thumbnail');
                    if (mediaThumbnail && mediaThumbnail.getAttribute('url')) {
                        thumbnailUrl = mediaThumbnail.getAttribute('url');
                    } else {
                        const thumbnailElement = item.querySelector('thumbnail');
                        if (thumbnailElement && thumbnailElement.getAttribute('url')) {
                            thumbnailUrl = thumbnailElement.getAttribute('url');
                        }
                    }
                    
                    // Se não tiver thumbnail, usar imagem padrão
                    if (!thumbnailUrl) {
                        thumbnailUrl = getDefaultImage(title);
                    }
                    
                    // Extrair ano da data de publicação se disponível
                    let year = '';
                    const pubDateElement = item.querySelector('pubDate');
                    if (pubDateElement) {
                        const pubDate = pubDateElement.textContent.trim();
                        const yearMatch = pubDate.match(/\d{4}/);
                        if (yearMatch) {
                            year = yearMatch[0];
                        }
                    }
                    
                    if (videoUrl) {
                        // Corrigir URLs que possam ter problemas
                        videoUrl = videoUrl.replace(/httos:/, 'https:');
                        
                        contentItems.push({
                            id: `item_${i}_${section}_${Date.now()}`,
                            title: title,
                            description: description,
                            poster: thumbnailUrl,
                            year: year,
                            genre: genre,
                            url: videoUrl,
                            type: getContentType(section)
                        });
                    }
                }
                
            } catch (error) {
                console.error('Erro ao parsear feed:', error);
                return parseFeedWithRegex(xmlContent, section);
            }
            
            return contentItems.length > 0 ? contentItems : getFallbackContent(section);
        }

        // Parsear formato com tag <show> (formato antigo)
        function parseShowFormat(shows, section) {
            const contentItems = [];
            
            for (let i = 0; i < shows.length; i++) {
                const show = shows[i];
                
                const title = getTextContent(show, 'title');
                const description = getTextContent(show, 'description');
                const posterUrl = getTextContent(show, 'posterUrl') || 
                                 getTextContent(show, 'thumbnailUrl') || 
                                 getDefaultImage(title);
                const year = getTextContent(show, 'year') || '';
                const genre = getTextContent(show, 'genre') || section;
                
                let videoUrl = '';
                const episodes = show.getElementsByTagName('episode');
                if (episodes.length > 0) {
                    const episode = episodes[0];
                    videoUrl = getTextContent(episode, 'url');
                }
                
                if (!videoUrl) {
                    videoUrl = getTextContent(show, 'url');
                }
                
                if (videoUrl) {
                    contentItems.push({
                        id: `item_${i}_${section}_${Date.now()}`,
                        title: title,
                        description: description,
                        poster: posterUrl,
                        year: year,
                        genre: genre,
                        url: videoUrl,
                        type: getContentType(section)
                    });
                }
            }
            
            return contentItems;
        }

        // Função auxiliar para extrair texto de uma tag
        function getTextContent(element, tagName) {
            const tags = element.getElementsByTagName(tagName);
            return tags.length > 0 ? tags[0].textContent.trim() : null;
        }

        // Parse alternativo com regex
        function parseFeedWithRegex(xmlContent, section) {
            const contentItems = [];
            
            try {
                // Tentar encontrar items RSS
                const itemRegex = /<item\b[^>]*>([\s\S]*?)<\/item>/gi;
                let itemMatch;
                
                while ((itemMatch = itemRegex.exec(xmlContent)) !== null) {
                    const itemContent = itemMatch[1];
                    
                    const title = extractWithRegex(itemContent, /<title>([\s\S]*?)<\/title>/i);
                    const description = extractWithRegex(itemContent, /<description>([\s\S]*?)<\/description>/i);
                    const category = extractWithRegex(itemContent, /<category>([\s\S]*?)<\/category>/i);
                    
                    // Extrair URL do vídeo
                    let videoUrl = '';
                    const mediaUrlMatch = itemContent.match(/url="([^"]+)"/i);
                    if (mediaUrlMatch) {
                        videoUrl = mediaUrlMatch[1];
                    }
                    
                    // Extrair URL da thumbnail
                    let thumbnailUrl = '';
                    const thumbnailMatch = itemContent.match(/<media:thumbnail\b[^>]*url="([^"]+)"/i) ||
                                         itemContent.match(/<thumbnail\b[^>]*url="([^"]+)"/i);
                    if (thumbnailMatch) {
                        thumbnailUrl = thumbnailMatch[1];
                    }
                    
                    if (!thumbnailUrl) {
                        thumbnailUrl = getDefaultImage(title);
                    }
                    
                    // Extrair ano
                    let year = '';
                    const pubDateMatch = itemContent.match(/<pubDate>([\s\S]*?)<\/pubDate>/i);
                    if (pubDateMatch) {
                        const pubDate = pubDateMatch[1].trim();
                        const yearMatch = pubDate.match(/\d{4}/);
                        if (yearMatch) {
                            year = yearMatch[0];
                        }
                    }
                    
                    if (videoUrl && title) {
                        contentItems.push({
                            id: `item_${contentItems.length}_${section}_${Date.now()}`,
                            title: title,
                            description: description || '',
                            poster: thumbnailUrl,
                            year: year || '',
                            genre: category || section,
                            url: videoUrl,
                            type: getContentType(section)
                        });
                    }
                }
                
            } catch (error) {
                console.error('Erro no parse com regex:', error);
            }
            
            return contentItems;
        }

        // Função auxiliar para extrair com regex
        function extractWithRegex(content, regex) {
            const match = content.match(regex);
            return match ? match[1].trim() : null;
        }

        // Função para determinar tipo de conteúdo
        function getContentType(section) {
            switch(section) {
                case 'tv': return 'TV';
                case 'filmes': return 'Filme';
                case 'series': return 'Série';
                default: return 'Conteúdo';
            }
        }

        // Função para imagem padrão
        function getDefaultImage(title) {
            if (!title) return 'https://via.placeholder.com/300x169/1a1a1a/ffffff?text=No+Image';
            const encodedTitle = encodeURIComponent(title.substring(0, 20));
            return `https://via.placeholder.com/300x169/1a1a1a/ffffff?text=${encodedTitle}`;
        }

        // Conteúdo de fallback
        function getFallbackContent(section) {
            const fallbackContent = {
                tv: [
                    {
                        id: 'fallback_tv_1',
                        title: 'TV Demonstração 1',
                        description: 'Conteúdo de demonstração para TV',
                        poster: 'https://via.placeholder.com/300x169/1a1a1a/ffffff?text=TV+1',
                        year: '2024',
                        genre: 'Demonstração',
                        url: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4',
                        type: 'TV'
                    }
                ],
                filmes: [
                    {
                        id: 'fallback_filme_1',
                        title: 'Filme Demonstração',
                        description: 'Conteúdo de demonstração para Filmes',
                        poster: 'https://via.placeholder.com/300x169/1a1a1a/ffffff?text=FILME',
                        year: '2024',
                        genre: 'Demonstração',
                        url: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4',
                        type: 'Filme'
                    }
                ],
                series: [
                    {
                        id: 'fallback_serie_1',
                        title: 'Série Demonstração',
                        description: 'Conteúdo de demonstração para Séries',
                        poster: 'https://via.placeholder.com/300x169/1a1a1a/ffffff?text=S%C3%89RIE',
                        year: '2024',
                        genre: 'Demonstração',
                        url: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerJoyrides.mp4',
                        type: 'Série'
                    }
                ],
                home: [
                    {
                        id: 'fallback_home_1',
                        title: 'Conteúdo em Destaque',
                        description: 'Conteúdo de demonstração para a Home',
                        poster: 'https://via.placeholder.com/300x169/1a1a1a/ffffff?text=HOME',
                        year: '2024',
                        genre: 'Demonstração',
                        url: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4',
                        type: 'Conteúdo'
                    }
                ]
            };
            
            return fallbackContent[section] || [];
        }

        // Função para mostrar mensagem de erro
        function showErrorMessage(section, errorMsg) {
            const containerId = section === 'home' ? 'homeRow' : `${section}Row`;
            const container = document.getElementById(containerId);
            
            if (container) {
                container.innerHTML = `
                    <div style="padding: 40px; text-align: center; color: var(--gray-text); width: 100%;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 48px; margin-bottom: 20px; color: var(--primary-red);"></i>
                        <h3>Erro ao carregar conteúdo</h3>
                        <p>${errorMsg}</p>
                        <button onclick="loadSectionContent('${section}')" style="margin-top: 20px; background: var(--primary-red); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
                            Tentar Novamente
                        </button>
                    </div>
                `;
            }
        }

        // Função para renderizar uma seção de conteúdo
        function renderContentSection(section, items) {
            const containerId = section === 'home' ? 'homeRow' : `${section}Row`;
            const container = document.getElementById(containerId);
            
            if (!container) return;
            
            container.innerHTML = '';
            
            if (items.length === 0) {
                container.innerHTML = `
                    <div style="padding: 40px; text-align: center; color: var(--gray-text); width: 100%;">
                        <i class="fas fa-info-circle" style="font-size: 48px; margin-bottom: 20px; color: var(--gray-text);"></i>
                        <h3>Nenhum Conteúdo Encontrado</h3>
                        <p>O feed RSS parece estar vazio ou não pôde ser carregado.</p>
                    </div>
                `;
                return;
            }
            
            items.forEach((item, index) => {
                const contentItem = document.createElement('div');
                contentItem.className = 'content-item';
                contentItem.dataset.index = index;
                
                contentItem.innerHTML = `
                    <div class="content-img" style="background-image: url('${item.poster}')">
                        <div style="position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.7); color: white; padding: 2px 8px; border-radius: 3px; font-size: 11px; font-weight: bold;">
                            ${item.type}
                        </div>
                    </div>
                    <div class="content-info">
                        <h3 class="content-title" title="${item.title}">${item.title}</h3>
                        <div class="content-meta">${item.genre} ${item.year ? '• ' + item.year : ''}</div>
                    </div>
                `;
                
                contentItem.addEventListener('click', () => {
                    playContent(item);
                });
                
                container.appendChild(contentItem);
            });
        }

        // Função para renderizar os detalhes do conteúdo abaixo do player
        function renderContentDetails(content) {
            const detailsContainer = document.getElementById('contentSpecificInfo');
            const titleMain = document.getElementById('contentTitleMain');
            detailsContainer.innerHTML = '';
            titleMain.textContent = content.title || 'Conteúdo Sem Título';

            let htmlContent = '';

            switch (content.type) {
                case 'TV':
                    htmlContent = `
                        <div class="content-info-block">
                            <h4 class="info-title">GUIA da programação de conteúdo</h4>
                            <p class="info-text">Informações do Guia de Programação para o canal: ${content.title}.</p>
                            <p class="info-text">Próximo Conteúdo: [A ser implementado via API/Lógica de Programação]</p>
                        </div>
                    `;
                    break;
                case 'Filme':
                    htmlContent = `
                        <div class="content-info-block">
                            <h4 class="info-title">TUDO SOBRE O CONTEÚDO VIA API TMDB</h4>
                            <p class="info-text">Filme: ${content.title} (${content.year})</p>
                            <p class="info-text">Gênero: ${content.genre}</p>
                            <p class="info-text">Sinopse: ${content.description || 'Nenhuma sinopse disponível.'}</p>
                            <p class="info-text">Detalhes do TMDB: [A ser implementado via API TMDB]</p>
                        </div>
                    `;
                    break;
                case 'Série':
                    htmlContent = `
                        <div class="content-info-block">
                            <h4 class="info-title">TUDO SOBRE O CONTEÚDO VIA API TMDB</h4>
                            <p class="info-text">Série: ${content.title} (${content.year})</p>
                            <p class="info-text">Temporada da Série: [A ser implementado]</p>
                            <p class="info-text">Episódio da Série: [A ser implementado]</p>
                            <p class="info-text">Gênero: ${content.genre}</p>
                            <p class="info-text">Sinopse: ${content.description || 'Nenhuma sinopse disponível.'}</p>
                            <p class="info-text">Detalhes do TMDB: [A ser implementado via API TMDB]</p>
                        </div>
                    `;
                    break;
                default:
                    htmlContent = `
                        <div class="content-info-block">
                            <h4 class="info-title">Detalhes do Conteúdo</h4>
                            <p class="info-text">Tipo: ${content.type}</p>
                            <p class="info-text">Descrição: ${content.description || 'Nenhuma descrição disponível.'}</p>
                        </div>
                    `;
            }

            detailsContainer.innerHTML = htmlContent;
        }

        // Função principal para reproduzir conteúdo
        function playContent(content) {
            currentContent = content;
            
            // Adicionar ao continue assistindo
            addToContinueWatching(content);
            
            // Atualizar informações na tela
            renderContentDetails(content);
            
            // Mostrar o player (CORREÇÃO: Só ativa quando clica no conteúdo)
            document.getElementById('playerOverlay').classList.add('active');
            
            // Limpar e configurar player
            setupVideoPlayer(content.url);
        }

        // Função para configurar o player de vídeo
        function setupVideoPlayer(videoUrl) {
            showLoading('Preparando player...');
            
            const video = document.getElementById('player');
            
            video.innerHTML = '';
            
            if (hls) {
                hls.destroy();
                hls = null;
            }
            
            if (currentPlayer) {
                currentPlayer.destroy();
                currentPlayer = null;
            }
            
            if (videoUrl.includes('.m3u8')) {
                setupHLSPlayer(video, videoUrl);
            } else {
                setupDirectPlayer(video, videoUrl);
            }
        }

        // Configurar player para stream HLS
        function setupHLSPlayer(video, videoUrl) {
            if (Hls.isSupported()) {
                hls = new Hls({
                    enableWorker: true,
                    lowLatencyMode: true,
                    backBufferLength: 90
                });
                
                hls.loadSource(videoUrl);
                hls.attachMedia(video);
                
                hls.on(Hls.Events.MANIFEST_PARSED, () => {
                    initializePlyrPlayer();
                });
                
                hls.on(Hls.Events.ERROR, (event, data) => {
                    if (data.fatal) {
                        switch(data.type) {
                            case Hls.ErrorTypes.NETWORK_ERROR:
                                hls.startLoad();
                                break;
                            case Hls.ErrorTypes.MEDIA_ERROR:
                                hls.recoverMediaError();
                                break;
                            default:
                                setupDirectPlayer(video, videoUrl);
                                break;
                        }
                    }
                });
                
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                video.src = videoUrl;
                
                const playAfterLoad = function() {
                    initializePlyrPlayer();
                    video.removeEventListener('loadedmetadata', playAfterLoad);
                };
                
                video.addEventListener('loadedmetadata', playAfterLoad);
            } else {
                setupDirectPlayer(video, videoUrl);
            }
        }

        // Configurar player para vídeo direto
        function setupDirectPlayer(video, videoUrl) {
            const source = document.createElement('source');
            source.src = videoUrl;
            
            if (videoUrl.includes('.mp4')) {
                source.type = 'video/mp4';
            } else if (videoUrl.includes('.ts')) {
                source.type = 'video/MP2T';
            } else if (videoUrl.includes('.mkv')) {
                source.type = 'video/x-matroska';
            } else {
                source.type = 'video/mp4';
            }
            
            video.appendChild(source);
            
            const playAfterLoad = function() {
                initializePlyrPlayer();
                video.removeEventListener('loadeddata', playAfterLoad);
            };
            
            video.addEventListener('loadeddata', playAfterLoad);
            
            video.addEventListener('error', () => {
                hideLoading();
                alert('Não foi possível carregar o vídeo. Verifique a URL.');
            });
            
            video.load();
        }

        // Inicializar player Plyr
        function initializePlyrPlayer() {
            const video = document.getElementById('player');
            
            currentPlayer = new Plyr(video, {
                controls: [
                    'play-large',
                    'play',
                    'progress',
                    'current-time',
                    'duration',
                    'mute',
                    'volume',
                    'settings',
                    'fullscreen'
                ],
                settings: ['quality', 'speed']
            });
            
            currentPlayer.on('ready', () => {
                hideLoading();
                
                // Tenta reproduzir automaticamente quando o player estiver pronto
                currentPlayer.play().catch(error => {
                    console.log('Autoplay pode estar bloqueado pelo navegador:', error);
                });
            });
            
            currentPlayer.on('error', () => {
                hideLoading();
                alert('Erro ao reproduzir o vídeo.');
            });
        }

        // Fechar player
        function closePlayer() {
            document.getElementById('playerOverlay').classList.remove('active');
            
            const video = document.getElementById('player');
            video.pause();
            
            if (hls) {
                hls.destroy();
                hls = null;
            }
            
            if (currentPlayer) {
                currentPlayer.destroy();
                currentPlayer = null;
            }
        }

        // Alternar entre seções
        function switchSection(section) {
            // Atualizar navegação
            document.querySelectorAll('.nav-links a, .menu-item').forEach(element => {
                element.classList.toggle('active', element.dataset.section === section);
            });
            
            // Mostrar/ocultar seções
            document.querySelectorAll('.content-section').forEach(sectionEl => {
                sectionEl.classList.toggle('active', sectionEl.classList.contains(`${section}-section`));
            });
            
            // Carregar conteúdo
            loadSectionContent(section);
        }

        // ==============================================
        // INICIALIZAÇÃO
        // ==============================================

        document.addEventListener('DOMContentLoaded', function() {
            // Mostrar animação de entrada
            showLoadingAnimation();
            
            // Eventos do login
            document.getElementById('loginForm').addEventListener('submit', async (e) => {
                e.preventDefault();
                
                const username = document.getElementById('loginUsername').value;
                const password = document.getElementById('loginPassword').value;
                
                const success = await authenticateUser(username, password);
                if (success) {
                    showProfilesScreen();
                }
            });
            
            document.getElementById('signupLink').addEventListener('click', (e) => {
                e.preventDefault();
                alert('Funcionalidade de cadastro em desenvolvimento!');
            });
            
            // Eventos dos perfis
            document.getElementById('manageProfilesBtn').addEventListener('click', () => {
                document.getElementById('manageProfilesModal').classList.add('active');
                renderManageProfiles();
            });
            
            document.getElementById('addProfileBtn').addEventListener('click', () => {
                openEditProfileModal();
            });
            
            document.getElementById('closeManageModal').addEventListener('click', () => {
                document.getElementById('manageProfilesModal').classList.remove('active');
            });
            
            // Eventos do modal de edição de perfil
            document.getElementById('editProfileForm').addEventListener('submit', (e) => {
                e.preventDefault();
                
                const profileId = document.getElementById('editProfileIndex').value;
                const name = document.getElementById('profileName').value;
                const avatar = document.getElementById('profileAvatar').value || `https://i.pravatar.cc/150?img=${Math.floor(Math.random() * 70) + 1}`;
                
                const profileData = {
                    name: name,
                    avatar: avatar,
                    settings: {}
                };
                
                saveProfile(profileId, profileData);
            });
            
            document.getElementById('closeEditModal').addEventListener('click', () => {
                document.getElementById('editProfileModal').classList.remove('active');
            });
            
            document.getElementById('cancelEditBtn').addEventListener('click', () => {
                document.getElementById('editProfileModal').classList.remove('active');
            });
            
            // Eventos do menu do perfil
            document.getElementById('switchProfileBtn').addEventListener('click', (e) => {
                e.preventDefault();
                showProfilesScreen();
            });
            
            document.getElementById('manageProfileBtn').addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('manageProfilesModal').classList.add('active');
                renderManageProfiles();
            });
            
            // NOVO: Evento para abrir o painel ADM
            document.getElementById('adminPanelBtn').addEventListener('click', (e) => {
                e.preventDefault();
                // Abrir o arquivo index_paineladm.html
                window.open('index_paineladm.html', '_blank');
            });
            
            document.getElementById('logoutBtn').addEventListener('click', (e) => {
                e.preventDefault();
                if (confirm('Deseja realmente sair?')) {
                    // Limpar dados de sessão
                    currentUser = null;
                    currentProfile = null;
                    localStorage.removeItem('savedUser');
                    localStorage.removeItem('currentProfile');
                    showLoginScreen();
                }
            });
            
            // Eventos do player
            document.getElementById('closePlayer').addEventListener('click', closePlayer);
            
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') closePlayer();
            });
            
            document.getElementById('playerOverlay').addEventListener('click', (e) => {
                if (e.target.id === 'playerOverlay') closePlayer();
            });
            
            // Navegação
            document.querySelectorAll('.nav-links a, .menu-item[data-section]').forEach(element => {
                element.addEventListener('click', (e) => {
                    e.preventDefault();
                    switchSection(element.dataset.section);
                });
            });
            
            // Botão de refresh
            document.getElementById('refreshBtn').addEventListener('click', (e) => {
                e.preventDefault();
                const activeSection = document.querySelector('.menu-item.active').dataset.section;
                loadSectionContent(activeSection);
            });
            
            // Botão de demonstração no hero
            document.getElementById('heroPlayBtn').addEventListener('click', () => {
                const demoContent = {
                    id: 'demo',
                    title: 'Demonstração do Player',
                    description: 'Vídeo de teste para verificar o funcionamento',
                    poster: 'https://images.unsplash.com/photo-1574267432553-4b4628081c31?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
                    year: '2024',
                    genre: 'Demonstração',
                    url: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4',
                    type: 'Demonstração'
                };
                playContent(demoContent);
            });
            
            // Scroll no navbar
            window.addEventListener('scroll', () => {
                document.querySelector('.navbar').classList.toggle('scrolled', window.scrollY > 50);
            });
        });
    </script>
</body>
</html>